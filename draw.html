<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Draw App</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.1/p5.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.1/addons/p5.sound.min.js"></script>
</head>

<body>
    <div>
        <button onclick="clearCanvas()">Clear</button>
        <button onclick="saveImage()">Save</button>
        <input type="color" id="colorPicker" onchange="setColor()">
        <input type="range" id="brushSize" min="1" max="50" value="10" onchange="setBrushSize()">
    </div>
    <div>
        <div id="drawingCanvas"></div>
    </div>

    <script>
        let canvas;
        let brushColor = '#000000';
        let brushSize = 10;

        function setup() {
            console.log('setup');
            canvas = createCanvas(800, 600);
            canvas.parent('drawingCanvas'); // Coloca el lienzo dentro del div con id 'drawingCanvas'
            background(255); // Establece el fondo blanco inicial
        }

        /*function draw() {
            console.log('draw');
            stroke(brushColor);
            strokeWeight(brushSize);
            if (mouseIsPressed) {
                console.log('pressed');
                line(pmouseX, pmouseY, mouseX, mouseY); // Dibuja una línea al arrastrar el ratón
            }
        }*/

        function draw() {
            stroke(brushColor);
            strokeWeight(brushSize);
            if (mouseIsPressed) {
                line(pmouseX, pmouseY, mouseX, mouseY);
            }
        }

        function clearCanvas() {
            background(255); // Limpia el lienzo
        }

        function saveImage() {
            saveCanvas(canvas, 'my_drawing', 'png'); // Guarda el contenido del lienzo como imagen PNG
        }

        function setColor() {
            brushColor = document.getElementById('colorPicker').value; // Actualiza el color del pincel
        }

        function setBrushSize() {
            brushSize = document.getElementById('brushSize').value; // Actualiza el tamaño del pincel
        }
    </script>
</body>

</html>